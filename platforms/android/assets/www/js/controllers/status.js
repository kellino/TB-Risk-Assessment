starter.controller("StatusCtrl",["$scope","$state","$ionicPopup","Navigator",function(e,t,a,n){e.$on("ionicView.enter",function(){e.resetFields()}),e.resetFields=function(){try{e.tst.tstSelect=null,e.igra.igraSelect=null,e.countryOfBirth.countryOfBirthSelect=null,e.states.stateSelect=null,e.age.ageSelect=null,e.ageIm.ageImSelect=null,e.race.raceSelect=null,e.bcg.bcgSelect=null,e.recentContact.recentContactSelect=null,e.hasState=!1,e.immigrated=!1}catch(t){a.alert({title:"Error",template:"Unable to reset form"})}},e.tst={tstSelect:null,availableOptions:[{id:1,name:"Test not done"},{id:2,name:"5-9mm"},{id:3,name:"10-14mm"},{id:4,name:"15mm+"}]},e.igra={igraSelect:null,availableOptions:[{id:1,name:"Test not done"},{id:2,name:"Negative"},{id:3,name:"Positive"}]},e.regionLoader=function(e,t){for(var a=0;a<e.length;a++){var n={};n.id=e[a].id,n.name=e[a].name,t.push(n)}};var l=[];e.regionLoader(countries,l),e.countryOfBirth={countryOfBirthSelect:null,availableOptions:l},e.hasState=!1;var r=[];e.loadStates=function(){if(r.length=0,"204"===window.sessionStorage.COB)e.hasState=!0,e.regionLoader(usaState,r);else if("43"===window.sessionStorage.COB)e.hasState=!0,e.regionLoader(chinaState,r);else if("88"===window.sessionStorage.COB)e.hasState=!0,e.regionLoader(indiaState,r);else if("26"===window.sessionStorage.COB)e.hasState=!0,e.regionLoader(brazilState,r);else if("8"===window.sessionStorage.COB)e.hasState=!0,e.regionLoader(argentinaState,r);else if("10"===window.sessionStorage.COB)e.hasState=!0,e.regionLoader(aussieState,r);else{e.hasState=!1;var t={};t.id=window.sessionStorage.COB,t.name="N/A",r.push(t)}},e.states={stateSelect:null,availableOptions:r};var c=[];for(i=0;i<80;i++){var o={};o.id=i+1,o.name=i+1,c.push(o)}e.age={ageSelect:null,availableOptions:c},e.ageIm={ageImSelect:null,availableOptions:c},e.immigrated=!1,e.hasImmigrated=function(){null!==e.ageIm&&(e.immigrated=!0)},e.race={raceSelect:null,availableOptions:[{id:1,name:"White/Caucasian"},{id:2,name:"Black/African American"},{id:3,name:"Hispanic"},{id:4,name:"Other"}]},e.bcg={bcgSelect:null,availableOptions:[{id:1,name:"Never vaccinated / unknown"},{id:2,name:"Vaccinated < 2 years"},{id:3,name:"Vaccinated â‰¥ 2 years"}]},e.recentContact={recentContactSelect:null,availableOptions:[{id:1,name:"No contact"},{id:2,name:"Close contact"},{id:3,name:"Casual contact"}]},e.storeValue=function(e,t){try{window.sessionStorage[e]=t}catch(n){a.alert({title:"Error",template:"Could not find enough memory to store data"})}},e.checkValues=function(){var t=!1;return null===e.tst.tstSelect?(e.tst.tstSelect="empty",t=!0):"empty"===e.tst.tstSelect&&(t=!0),null===e.igra.igraSelect?(e.igra.igraSelect="empty",t=!0):"empty"===e.igra.igraSelect&&(t=!0),null===e.countryOfBirth.countryOfBirthSelect?(e.countryOfBirth.countryOfBirthSelect="empty",t=!0):"empty"===e.countryOfBirth.countryOfBirthSelect&&(t=!0),null===e.age.ageSelect?(e.age.ageSelect="empty",t=!0):"empty"===e.age.ageSelect&&(t=!0),null===e.bcg.bcgSelect?(e.bcg.bcgSelect="empty",t=!0):"empty"===e.bcg.bcgSelect&&(t=!0),null===e.recentContact.recentContactSelect?(e.recentContact.recentContactSelect="empty",t=!0):"empty"===e.recentContact.recentContactSelect&&(t=!0),null!==e.ageIm.ageImSelect&&null!==e.age.ageSelect&&parseInt(e.ageIm.ageImSelect)>parseInt(e.age.ageSelect)&&(e.ageIm.ageImSelect="old",e.age.ageSelect="empty",t=!0),t},e.clickRight=function(){e.checkValues()===!0?a.alert({title:"Incorrect Form",template:"Form contains errors"}):"1"===window.sessionStorage.tst&&"1"===window.sessionStorage.igra?a.alert({title:"Incorrect Form",template:"No tests performed"}):(n.changeState("app.conditions"),e.resetFields())}}]);