starter.controller("ConditionsCtrl",["$scope","$state","$ionicPopup","Navigator",function(s,t,e,o){s.condList=[],window.sessionStorage.selectedList="",window.sessionStorage.condRisk=0,s.loadList=function(){s.condList.length=0;for(var t=0;t<conditions.length;t++)s.condList.push(conditions[t])},s.resetList=function(){for(var t=0;t<s.condList.length;t++)s.condList[t].checked=!1},s.clickLeft=function(){o.changeState("app.status")},s.clickRight=function(){try{s.sumRiskFactors(),s.calculatePPV(),s.calculateARD(),o.changeState("app.results"),s.resetList()}catch(t){e.alert({title:"Calculcation Error",template:"Unable to perform calculation. Please try restarting the app"})}},s.sumRiskFactors=function(){if(0!==s.condList.lenght)for(var t=0;t<s.condList.length;t++)s.condList[t].checked===!0&&(window.sessionStorage.selectedList+=JSON.stringify(s.condList[t].text),window.sessionStorage.condRisk+=parseInt(s.condList[t].rate))},s.countryOrState=function(){var s;switch(window.sessionStorage.COB){case"8":s=window.argentinaState[window.sessionStorage.states-1];break;case"10":s=window.aussieState[window.sessionStorage.states-1];break;case"26":s=window.brazilState[window.sessionStorage.states-1];break;case"43":s=window.chinaState[window.sessionStorage.states-1];break;case"88":s=window.indiaState[window.sessionStorage.states-1];break;case"204":s=window.usaState[window.sessionStorage.states-1];break;default:s=window.countries[window.sessionStorage.COB-1]}return s},s.falsePosByCountry=function(s){var t;return t=2===parseInt(window.sessionStorage.tst)?s.small:3===parseInt(window.sessionStorage.tst)?s.med:(4===parseInt(window.sessionStorage.tst),0)},s.igraResult=function(){var s;return s="3"===window.sessionStorage.igra?!0:!1},s.contactStatus=function(){var s;return s=2===parseInt(window.sessionStorage.rc)?.4:3===parseInt(window.sessionStorage.rc)?.08:0},s.falsePosBCG=function(s){var t;return t=2==window.sessionStorage.bcg?2==s?.042:3==s?.053:4==s?.028:0:3==window.sessionStorage.bcg?2==s?.258:3==s?.087:4==s?.078:0:0},s.calculateARI=function(s,t,e){var o;return o=0===s?1-Math.pow(1-e/4900,t):1-Math.pow((1-1*s)*(1-e/4900),t)},s.calculateEthnicity=function(){var s;return s="2"===window.sessionStorage.race?3.09:"3"==window.sessionStorage.race?3.66:1},s.calculatePPV=function(){var t=s.countryOrState(),e=s.falsePosByCountry(t),o=s.igraResult(),a=0;a=parseInt(t.smear);var n=0;n=parseInt(window.sessionStorage.age);var i=0;("204"===window.sessionStorage.COB||"34"===window.sessionStorage.COB||"35"===window.sessionStorage.COB)&&(i=t.small+1);var r=s.contactStatus(),w=s.falsePosBCG(e),d=s.calculateARI(r,n,a),c=s.calculateEthnicity(),g=.98,l=1*c*(d/(d+1*e/100+1*w)),S=0,u=parseFloat(window.sessionStorage.tst);S=o===!1&&1===u?0:o===!0&&1===u?g:o===!0&&u>1?1-(1-l)*(1-g):l,S>1?S=.9999:0>S&&(S=0),window.sessionStorage.PPVglobal=S.toFixed(2)},s.calculateARD=function(){var t,e,o;o=0===parseInt(window.sessionStorage.condRisk)?1:parseInt(window.sessionStorage.condRisk),2===parseInt(window.sessionStorage.rc)?(t=.05,e=.001,s.ard=parseFloat(window.sessionStorage.PPVglobal)*t*o*100,s.ardAfter2=parseFloat(window.sessionStorage.PPVglobal)*e*o*(80-parseInt(window.sessionStorage.age))*100):(t=.001,e=.001,s.ard=parseFloat(window.sessionStorage.PPVglobal)*t*o*100,s.ardAfter2=parseFloat(window.sessionStorage.PPVglobal)*e*o*(80-parseInt(window.sessionStorage.age))*100),isNaN(s.ard)?window.sessionStorage.ard=0:s.ard>100?window.sessionStorage.ard=99.99:s.ard<0?window.sessionStorage.ard=0:window.sessionStorage.ard=s.ard.toFixed(4),s.ardAfter2>100?window.sessionStorage.ardAfter2=99.99:s.ardAfter2<0?window.sessionStorage.ardAfter2=0:isNaN(s.ardAfter2)?window.sessionStorage.ardAfter2=0:window.sessionStorage.ardAfter2=s.ardAfter2.toFixed(2)}}]);